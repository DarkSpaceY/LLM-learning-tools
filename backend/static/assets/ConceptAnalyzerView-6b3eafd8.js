import{_ as M,i as N,j as S,C as O,r as h,o,a as c,b as t,t as i,u as d,d as n,w as a,k as T,p as E,l as B,f as e,m as U,e as q,F as V,g as D,E as A,D as $,G}from"./index-b16f3770.js";import{a as K}from"./axios-3a665b0f.js";const R={class:"concept-analyzer-container"},W={class:"analyzer-header"},H={class:"description"},J={class:"analyzer-content"},P={class:"input-section"},Q={class:"action-buttons"},X={key:0,class:"result-section"},Y={class:"card-header"},Z={key:0,class:"definition-content"},ee={class:"definition-text"},te={key:1,class:"definition-content"},ae={class:"definition-text text-muted"},se={class:"card-header"},oe={key:0},ne={class:"characteristics-list"},le={key:1,class:"empty-content"},re={class:"text-muted"},ie={class:"card-header"},ce={key:0},de={class:"examples-list"},ue={key:1,class:"empty-content"},pe={class:"text-muted"},_e={class:"card-header"},he={class:"network-graph"},fe={key:1,class:"empty-content"},me={class:"text-muted"},ye={class:"card-header"},ve={key:0,class:"scenarios-list"},ge={key:1,class:"empty-content"},be={class:"text-muted"},we={__name:"ConceptAnalyzerView",setup(ke){const f=N({concept:""}),x=S(!1),s=S(null),C=S(null);let p=null;const z=async()=>{var w,m;if(!f.concept){A.warning(e("请输入概念名称"));return}x.value=!0;try{const l=await K.post("/api/concept/analyze",{concept_name:f.concept});if(!l.data||!l.data.data)throw new Error("服务器返回的数据格式不正确：响应数据为空");const _=l.data.data,r={concept:{type:"string",required:!0},definition:{type:"string",required:!0},characteristics:{type:"array",required:!1},examples:{type:"array",required:!1},relations:{type:"array",required:!1},applications:{type:"array",required:!1}},y=Object.entries(r).filter(([u,v])=>{const g=_[u];return v.required&&!g?!0:(v.type==="array"&&Array.isArray(g)&&g.length===0,!1)}).map(([u])=>u);if(y.length>0&&console.warn(`响应数据中缺少以下必需字段: [${y.join(", ")}]`),y.some(u=>r[u].required))throw new Error("服务器返回的数据缺少必需字段");s.value=_,s.value&&s.value.relations&&s.value.relations.length>0&&$(()=>{j()})}catch(l){let _=e("分析失败，请稍后重试");l.response&&l.response.data&&l.response.data.detail&&(_=e(l.response.data.detail));const r={type:l.name,message:l.message,stack:l.stack,timestamp:new Date().toISOString(),context:{concept:f.concept,responseStatus:(w=l.response)==null?void 0:w.status,responseData:(m=l.response)==null?void 0:m.data}};console.error("Concept analysis failed:",r),A.error(_)}finally{x.value=!1}},F=()=>{f.concept="",s.value=null,p&&(p.dispose(),p=null)},j=()=>{if(!C.value)return;p&&p.dispose(),p=G(C.value);const w=[{id:"center",name:s.value.concept,symbolSize:70,itemStyle:{color:"#1890ff",borderWidth:2,borderColor:"#fff",shadowColor:"rgba(0, 0, 0, 0.2)",shadowBlur:10},category:0}],m=[],l={子类:"#2ecc71",组成关系:"#e74c3c",相关:"#f39c12",应用:"#9b59b6"};s.value.relations.forEach((r,y)=>{w.push({id:`node${y}`,name:r.concept,symbolSize:50,itemStyle:{color:l[r.relationship]||"#95a5a6",borderWidth:1,borderColor:"#fff",shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:5},category:1}),m.push({source:"center",target:`node${y}`,value:r.relationship,lineStyle:{color:l[r.relationship]||"#95a5a6",width:2,type:"solid",curveness:.2,shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:2},label:{show:!0,formatter:e(r.relationship),fontSize:12,backgroundColor:"rgba(255, 255, 255, 0.8)",padding:[4,8],borderRadius:4}})});const _={title:{text:e("概念关系网络"),top:"bottom",left:"right",textStyle:{fontSize:14,color:"#666"}},tooltip:{trigger:"item",formatter:r=>{if(r.dataType==="node")return r.name;if(r.dataType==="edge")return e(r.value)}},legend:[{data:[e("中心概念"),e("相关概念")],bottom:30,icon:"circle"}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"force",data:w,links:m,categories:[{name:e("中心概念")},{name:e("相关概念")}],roam:!0,label:{show:!0,position:"right",fontSize:12,backgroundColor:"rgba(255, 255, 255, 0.8)",padding:[4,8],borderRadius:4},force:{repulsion:200,edgeLength:120,gravity:.1},emphasis:{focus:"adjacency",lineStyle:{width:4}}}]};p.setOption(_)};return O(()=>{window.addEventListener("resize",()=>{p&&p.resize()})}),(w,m)=>{const l=h("el-input"),_=h("el-form-item"),r=h("el-button"),y=h("el-form"),u=h("el-card"),v=h("el-col"),g=h("el-row"),I=h("el-timeline-item"),L=h("el-timeline");return o(),c("div",R,[t("div",W,[t("h2",null,i(d(e)("概念分析器")),1),t("p",H,i(d(e)("深入分析概念的定义、特征和关联关系")),1)]),t("div",J,[t("div",P,[n(y,{model:f,"label-position":"top",onSubmit:T(z,["prevent"])},{default:a(()=>[n(_,{label:d(e)("概念名称")},{default:a(()=>[n(l,{modelValue:f.concept,"onUpdate:modelValue":m[0]||(m[0]=b=>f.concept=b),placeholder:d(e)("请输入要分析的概念名称"),clearable:!0,onKeyup:U(z,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t("div",Q,[n(r,{type:"primary",onClick:z,loading:x.value,disabled:!f.concept},{default:a(()=>[q(i(d(e)("开始分析")),1)]),_:1},8,["loading","disabled"]),n(r,{onClick:F,disabled:x.value},{default:a(()=>[q(i(d(e)("重置")),1)]),_:1},8,["disabled"])])]),_:1},8,["model"])]),s.value?(o(),c("div",X,[s.value.concept||s.value.definition?(o(),E(g,{key:0,gutter:20},{default:a(()=>[n(v,{span:24},{default:a(()=>[n(u,{class:"definition-card",shadow:"hover"},{header:a(()=>[t("div",Y,[t("h4",null,i(s.value.concept||d(e)("概念")),1)])]),default:a(()=>[s.value.definition?(o(),c("div",Z,[t("p",ee,i(s.value.definition),1)])):(o(),c("div",te,[t("p",ae,i(d(e)("暂无定义")),1)]))]),_:1})]),_:1})]),_:1})):B("",!0),n(g,{gutter:20,class:"mt-4"},{default:a(()=>[n(v,{span:12},{default:a(()=>[n(u,{class:"characteristics-card",shadow:"hover"},{header:a(()=>[t("div",se,[t("h4",null,i(d(e)("核心特征")),1)])]),default:a(()=>[s.value.characteristics&&s.value.characteristics.length>0?(o(),c("div",oe,[t("ul",ne,[(o(!0),c(V,null,D(s.value.characteristics,(b,k)=>(o(),c("li",{key:k},i(b),1))),128))])])):(o(),c("div",le,[t("p",re,i(d(e)("暂无核心特征数据")),1)]))]),_:1})]),_:1}),n(v,{span:12},{default:a(()=>[n(u,{class:"examples-card",shadow:"hover"},{header:a(()=>[t("div",ie,[t("h4",null,i(d(e)("典型示例")),1)])]),default:a(()=>[s.value.examples&&s.value.examples.length>0?(o(),c("div",ce,[t("ul",de,[(o(!0),c(V,null,D(s.value.examples,(b,k)=>(o(),c("li",{key:k},i(b),1))),128))])])):(o(),c("div",ue,[t("p",pe,i(d(e)("暂无典型示例数据")),1)]))]),_:1})]),_:1})]),_:1}),n(g,{gutter:20,class:"mt-4"},{default:a(()=>[n(v,{span:24},{default:a(()=>[n(u,{class:"network-card",shadow:"hover"},{header:a(()=>[t("div",_e,[t("h4",null,i(d(e)("概念关系网络")),1)])]),default:a(()=>[t("div",he,[s.value.relations&&s.value.relations.length>0?(o(),c("div",{key:0,class:"graph-container",ref_key:"graphContainer",ref:C},null,512)):(o(),c("div",fe,[t("p",me,i(d(e)("暂无概念关系网络数据")),1)]))])]),_:1})]),_:1})]),_:1}),n(g,{gutter:20,class:"mt-4"},{default:a(()=>[n(v,{span:24},{default:a(()=>[n(u,{class:"applications-card"},{header:a(()=>[t("div",ye,[t("h4",null,i(d(e)("应用场景")),1)])]),default:a(()=>[s.value.applications&&s.value.applications.length>0?(o(),c("div",ve,[n(L,null,{default:a(()=>[(o(!0),c(V,null,D(s.value.applications,(b,k)=>(o(),E(I,{key:k},{default:a(()=>[q(i(b),1)]),_:2},1024))),128))]),_:1})])):(o(),c("div",ge,[t("p",be,i(d(e)("暂无应用场景数据")),1)]))]),_:1})]),_:1})]),_:1})])):B("",!0)])])}}},ze=M(we,[["__scopeId","data-v-63b1d1b3"]]);export{ze as default};
