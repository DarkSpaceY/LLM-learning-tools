import{c as L,_ as U,r as p,o as h,a as b,b as n,d as i,w as v,e as V,t as c,u,f as s,F as A,g as F,n as X,h as S,i as P,j as R,k as W,l as J,m as Q,E as C,p as T,q as Y}from"./index-b16f3770.js";import{a as Z}from"./axios-3a665b0f.js";import"./index-61e59391.js";var z={exports:{}};(function(r,E){(function(w,o){o()})(L,function(){function w(e,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function o(e,l,_){var t=new XMLHttpRequest;t.open("GET",e),t.responseType="blob",t.onload=function(){x(t.response,l,_)},t.onerror=function(){console.error("could not download file")},t.send()}function f(e){var l=new XMLHttpRequest;l.open("HEAD",e,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(l)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof L=="object"&&L.global===L?L:void 0,g=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),x=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(e,l,_){var t=m.URL||m.webkitURL,d=document.createElement("a");l=l||e.name||"download",d.download=l,d.rel="noopener",typeof e=="string"?(d.href=e,d.origin===location.origin?a(d):f(d.href)?o(e,l,_):a(d,d.target="_blank")):(d.href=t.createObjectURL(e),setTimeout(function(){t.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(e,l,_){if(l=l||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(w(e,_),l);else if(f(e))o(e,l,_);else{var t=document.createElement("a");t.href=e,t.target="_blank",setTimeout(function(){a(t)})}}:function(e,l,_,t){if(t=t||open("","_blank"),t&&(t.document.title=t.document.body.innerText="downloading..."),typeof e=="string")return o(e,l,_);var d=e.type==="application/octet-stream",y=/constructor/i.test(m.HTMLElement)||m.safari,B=/CriOS\/[\d]+/.test(navigator.userAgent);if((B||d&&y||g)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var j=k.result;j=B?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),t?t.location.href=j:location=j,t=null},k.readAsDataURL(e)}else{var O=m.URL||m.webkitURL,q=O.createObjectURL(e);t?t.location=q:location.href=q,t=null,setTimeout(function(){O.revokeObjectURL(q)},4e4)}});m.saveAs=x.saveAs=x,r.exports=x})})(z);var ee=z.exports;const te={class:"exercise-content"},se={class:"exercise-type"},oe={class:"question-text"},ne={class:"options"},le={class:"answer-section"},ae={class:"answer"},ie={__name:"MultipleChoiceExercise",props:{exercise:{type:Object,required:!0}},setup(r){return(E,w)=>{const o=p("el-tag"),f=p("el-rate");return h(),b("div",te,[n("div",se,[i(o,{size:"small",type:"success"},{default:v(()=>[V(c(u(s)("选择题")),1)]),_:1}),i(f,{modelValue:r.exercise.difficulty,"onUpdate:modelValue":w[0]||(w[0]=a=>r.exercise.difficulty=a),max:5,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),n("div",oe,c(r.exercise.question),1),n("div",ne,[(h(!0),b(A,null,F(r.exercise.options,(a,m)=>(h(),b("div",{key:m,class:X(["option",{"correct-answer":m===r.exercise.answer}])},c(a),3))),128))]),n("div",le,[n("p",ae,[n("strong",null,c(u(s)("答案"))+":",1),V(" "+c(r.exercise.answer),1)])])])}}},D=U(ie,[["__scopeId","data-v-a22ad636"]]);const ce={class:"exercise-content"},re={class:"exercise-type"},de={class:"question-text"},ue={class:"true-false-options"},_e={class:"answer-section"},pe={class:"answer"},fe={__name:"TrueFalseExercise",props:{exercise:{type:Object,required:!0}},setup(r){const E=r,w=S(()=>E.exercise.answer);return(o,f)=>{const a=p("el-tag"),m=p("el-rate"),g=p("el-radio"),x=p("el-radio-group");return h(),b("div",ce,[n("div",re,[i(a,{size:"small",type:"warning"},{default:v(()=>[V(c(u(s)("判断题")),1)]),_:1}),i(m,{modelValue:r.exercise.difficulty,"onUpdate:modelValue":f[0]||(f[0]=e=>r.exercise.difficulty=e),max:5,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),n("div",de,c(r.exercise.question),1),n("div",ue,[i(x,{modelValue:w.value,"onUpdate:modelValue":f[1]||(f[1]=e=>w.value=e),disabled:""},{default:v(()=>[i(g,{label:"true",border:""},{default:v(()=>[V(c(u(s)("正确")),1)]),_:1}),i(g,{label:"false",border:""},{default:v(()=>[V(c(u(s)("错误")),1)]),_:1})]),_:1},8,["modelValue"])]),n("div",_e,[n("p",pe,[n("strong",null,c(u(s)("答案"))+":",1),V(" "+c(r.exercise.answer==="true"?u(s)("正确"):u(s)("错误")),1)])])])}}},me=U(fe,[["__scopeId","data-v-79089cf7"]]);const ve={class:"exercise-content"},xe={class:"exercise-type"},ye={class:"question-text"},he={class:"answer-section"},we={class:"answer"},be={class:"answer-content"},ge={__name:"ShortAnswerExercise",props:{exercise:{type:Object,required:!0}},setup(r){return(E,w)=>{const o=p("el-tag"),f=p("el-rate");return h(),b("div",ve,[n("div",xe,[i(o,{size:"small",type:"info"},{default:v(()=>[V(c(u(s)("简答题")),1)]),_:1}),i(f,{modelValue:r.exercise.difficulty,"onUpdate:modelValue":w[0]||(w[0]=a=>r.exercise.difficulty=a),max:5,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),n("div",ye,c(r.exercise.question),1),n("div",he,[n("div",we,[n("strong",null,c(u(s)("答案"))+":",1),n("div",be,c(r.exercise.answer),1)])])])}}},$e=U(ge,[["__scopeId","data-v-7024cbb9"]]);const Ee={class:"exercise-content"},Ve={class:"exercise-type"},ke={class:"question-text"},qe={key:0},je={key:1,class:"blank-space"},Ae={class:"answer-section"},Ue={class:"answer"},Be={__name:"FillBlankExercise",props:{exercise:{type:Object,required:!0}},setup(r){const E=r,w=S(()=>{const f=[],a=E.exercise.question,m=/_{3,}/g;let g=0,x;for(;(x=m.exec(a))!==null;)x.index>g&&f.push({text:a.substring(g,x.index),isBlank:!1}),f.push({text:x[0],isBlank:!0}),g=x.index+x[0].length;return g<a.length&&f.push({text:a.substring(g),isBlank:!1}),f}),o=S(()=>Array.isArray(E.exercise.answer)?E.exercise.answer:[E.exercise.answer]);return(f,a)=>{const m=p("el-tag"),g=p("el-rate");return h(),b("div",Ee,[n("div",Ve,[i(m,{size:"small",type:"primary"},{default:v(()=>[V(c(u(s)("填空题")),1)]),_:1}),i(g,{modelValue:r.exercise.difficulty,"onUpdate:modelValue":a[0]||(a[0]=x=>r.exercise.difficulty=x),max:5,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),n("div",ke,[(h(!0),b(A,null,F(w.value,(x,e)=>(h(),b(A,{key:e},[x.isBlank?(h(),b("span",je,"?")):(h(),b("span",qe,c(x.text),1))],64))),128))]),n("div",Ae,[n("p",Ue,[n("strong",null,c(u(s)("答案"))+":",1),(h(!0),b(A,null,F(o.value,(x,e)=>(h(),b("span",{key:e,class:"blank-answer"},c(e+1)+". "+c(x),1))),128))])])])}}},Le=U(Be,[["__scopeId","data-v-3bba00c0"]]);const Ce={class:"exercise-content"},Fe={class:"exercise-type"},Oe={class:"question-text"},Se={class:"answer-section"},Me={class:"answer"},Re={class:"answer-content"},Te={__name:"CalculationExercise",props:{exercise:{type:Object,required:!0}},setup(r){return(E,w)=>{const o=p("el-tag"),f=p("el-rate");return h(),b("div",Ce,[n("div",Fe,[i(o,{size:"small",type:"danger"},{default:v(()=>[V(c(u(s)("计算题")),1)]),_:1}),i(f,{modelValue:r.exercise.difficulty,"onUpdate:modelValue":w[0]||(w[0]=a=>r.exercise.difficulty=a),max:5,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),n("div",Oe,c(r.exercise.question),1),n("div",Se,[n("div",Me,[n("strong",null,c(u(s)("答案"))+":",1),n("div",Re,c(r.exercise.answer),1)])])])}}},De=U(Te,[["__scopeId","data-v-ddde4f78"]]);const ze={class:"exercise-generator-container"},Ie={class:"generator-header"},Ge={class:"description"},He={class:"generator-content"},Ne={class:"input-section"},Ke={class:"action-buttons"},Xe={key:0,class:"result-section"},Pe={class:"card-header"},We={class:"exercises-list"},Je={__name:"ExerciseGeneratorView",setup(r){const E=[{value:"multiple_choice",label:"选择题"},{value:"true_false",label:"判断题"},{value:"short_answer",label:"简答题"},{value:"fill_blank",label:"填空题"},{value:"calculation",label:"计算题"}],w=[s("入门"),s("基础"),s("进阶"),s("挑战"),s("专家")],o=P({topic:"",types:[],difficulty:3,count:5}),f=R(!1),a=R([]),m=async()=>{var l,_;if(!o.topic.trim()){C.warning(s("请输入知识点"));return}if(!o.types.length){C.warning(s("请选择至少一种题目类型"));return}f.value=!0;try{const d=(await Z.post("/api/exercises/generate",{topic:o.topic.trim(),types:o.types,difficulty:o.difficulty,count:o.count})).data.data;if(!d||!Array.isArray(d))throw new Error(s("服务器返回的数据格式不正确"));a.value=d.map(y=>({question:y.question,options:y.options||{},answer:y.answer,type:y.type_==="选择"?"multiple_choice":y.type_==="判断"?"true_false":y.type_==="计算"?"calculation":y.type_==="简答"?"short_answer":y.type_==="填空"?"fill_blank":"other",difficulty:o.difficulty})),C.success(s("练习题生成成功"))}catch(t){let d=s("生成失败，请稍后重试");(_=(l=t.response)==null?void 0:l.data)!=null&&_.message?d=s(t.response.data.message):t.message&&(d=s(t.message)),C.error(d),console.error("Exercise generation failed:",t)}finally{f.value=!1}},g=()=>{o.topic="",o.types=[],o.difficulty=3,o.count=5,a.value=[]},x=l=>({multiple_choice:D,true_false:me,short_answer:$e,fill_blank:Le,calculation:De})[l]||D,e=()=>{if(!a.value.length)return;const l=a.value.map((t,d)=>{let y=`${d+1}. ${t.question}
`;return t.options&&(y+=Object.entries(t.options).map(([B,k])=>`   ${k}`).join(`
`),y+=`
`),y+=`答案：${t.answer}
`,t.explanation&&(y+=`解析：${t.explanation}
`),y+=`-------------------
`,y}).join(`
`),_=new Blob([l],{type:"text/plain;charset=utf-8"});ee.saveAs(_,`练习题-${o.topic}-${new Date().toLocaleDateString()}.txt`),C.success(s("练习题导出成功"))};return(l,_)=>{const t=p("el-input"),d=p("el-form-item"),y=p("el-option"),B=p("el-select"),k=p("el-rate"),O=p("el-input-number"),q=p("el-button"),j=p("el-form"),I=p("el-collapse-item"),G=p("el-collapse"),H=p("el-card"),N=p("el-col"),K=p("el-row");return h(),b("div",ze,[n("div",Ie,[n("h2",null,c(u(s)("练习题生成器")),1),n("p",Ge,c(u(s)("根据知识点智能生成练习题，提供详细解析和答案")),1)]),n("div",He,[n("div",Ne,[i(j,{model:o,"label-position":"top",onSubmit:W(m,["prevent"])},{default:v(()=>[i(d,{label:u(s)("知识点")},{default:v(()=>[i(t,{modelValue:o.topic,"onUpdate:modelValue":_[0]||(_[0]=$=>o.topic=$),placeholder:u(s)("请输入知识点名称"),clearable:!0,onKeyup:Q(m,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(d,{label:u(s)("题目类型")},{default:v(()=>[i(B,{modelValue:o.types,"onUpdate:modelValue":_[1]||(_[1]=$=>o.types=$),multiple:"","collapse-tags":"",placeholder:u(s)("请选择题目类型")},{default:v(()=>[(h(),b(A,null,F(E,$=>i(y,{key:$.value,label:u(s)($.label),value:$.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),i(d,{label:u(s)("难度等级")},{default:v(()=>[i(k,{modelValue:o.difficulty,"onUpdate:modelValue":_[2]||(_[2]=$=>o.difficulty=$),max:5,texts:w,"show-text":""},null,8,["modelValue"])]),_:1},8,["label"]),i(d,{label:u(s)("生成数量")},{default:v(()=>[i(O,{modelValue:o.count,"onUpdate:modelValue":_[3]||(_[3]=$=>o.count=$),min:1,max:10,step:1},null,8,["modelValue"])]),_:1},8,["label"]),n("div",Ke,[i(q,{type:"primary",onClick:m,loading:f.value,disabled:!o.topic||!o.types.length},{default:v(()=>[V(c(u(s)("生成练习题")),1)]),_:1},8,["loading","disabled"]),i(q,{onClick:g,disabled:f.value},{default:v(()=>[V(c(u(s)("重置")),1)]),_:1},8,["disabled"])])]),_:1},8,["model"])]),a.value.length>0?(h(),b("div",Xe,[i(K,{gutter:20},{default:v(()=>[i(N,{span:24},{default:v(()=>[i(H,{class:"exercises-card"},{header:v(()=>[n("div",Pe,[n("h4",null,c(u(s)("生成的练习题")),1),i(q,{type:"primary",size:"small",onClick:e,disabled:!a.value.length},{default:v(()=>[V(c(u(s)("导出练习题")),1)]),_:1},8,["disabled"])])]),default:v(()=>[n("div",We,[i(G,{accordion:""},{default:v(()=>[(h(!0),b(A,null,F(a.value,($,M)=>(h(),T(I,{key:M,title:`${u(s)("题目")} ${M+1}: ${$.question}`},{default:v(()=>[(h(),T(Y(x($.type)),{exercise:$},null,8,["exercise"]))]),_:2},1032,["title"]))),128))]),_:1})])]),_:1})]),_:1})]),_:1})])):J("",!0)])])}}},et=U(Je,[["__scopeId","data-v-0e0fb1c6"]]);export{et as default};
